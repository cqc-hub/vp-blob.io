# Esbuild 介绍

Esbuild 作为 vite 的双引擎之一, 在很多关键的构建阶段(如 `依赖预编译`, `TS 语法转译`, `代码压缩`) 让 vite 获得了相当优异的性能, 是 vite 高性能的得力帮手.
无论是在 vite 配置项还是源码实现中, 都包含了不少 Esbuild 本身的基本概念和高阶用法

## 为什么 Esbuild 性能这么突出

Esbuild 是基于 Golang 开发的一款打包工具, 相比传统的打包工具, 主打性能优势, 在构建速度上比传统工具快 `10~100` 倍.
那么, 它是怎么会这么快的呢, 主要可以包括成 4 点:

- 1. **使用 Golang 开发**

  构建逻辑代码直接被编译为原生机器码, 而不用像 js 一样先代码解析为字节码, 然后转换为 机器码, 大大节省了程序运行时间

- 2. **多核并行**

  内部打包算法充分利用多核 cpu 优势, 所有的步骤尽可能并行, 这也是得益于 go 当中多线程共享内存的优势

- 3. **从零造轮子**

  几乎没有使用任何第三方库, 所有逻辑自己编写, 大到 AST 解析, 小到字符串的操作, 保证极致的代码性能

- 4. **高效的内存利用**

  Esbuild 中从头到尾尽可能地复用一份 AST 节点数据, 而不用像 JS 打包工具中频繁地解析和传递 AST 数据(如 string -> ts -> js -> string), 造成内存大量浪费
