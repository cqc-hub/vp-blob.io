---
pageClass: my-note
---

# 单文件 or 内联？

在vite 中, 所有的静态资源都有两种构建方式,

- 一种是打包成一个文件,
- 另一种是通过 base64 编码的格式内嵌到代码中.

那么上面两个方案应该怎么选择呢?

对于比较小的资源, 适合直接内嵌到代码中, 一方面对 `代码体积影响很小`, 另一方面减少不必要对网络请求, `优化网络性能`.

而对于比较大的资源, 就推荐单独打包成一个文件, 而不是内联了, 否则可能导致上 MB大小的 base64 字符串内嵌到代码中, 导致代码体积瞬间庞大, 页面加载性能直线下降.

vite 内置的优化方案是下面这样的:

- 如果静态资源体积 >= 4kb, 则提取成单独的文件
- 如果静态资源体积 < 4kb, 则作为 base64 格式的字符串内嵌

上述的 `4kb` 即为提取成单文件的临界值, 当然,这个临界值呢可以通过 `build.assetsInlineLimit` 自行配置

```ts
// vite.config.ts

{
  build: {
    // 8kb
    assetsInlineLimit: 8 * 1024
  }
}
```

> svg 格式文件不受这个临界值的影响, 始终会打包成单独的文件, 因为他和普通格式的图片不一样, 需要动态设置一些属性
