import{_ as p,r as t,o as e,a as o,d as n,e as c,w as l,F as u,f as s,b as r}from"./app.28445bf9.js";const i={},k=n("h1",{id:"",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#","aria-hidden":"true"},"#")],-1),b=n("h2",{id:"web-assembly-\u6587\u4EF6",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#web-assembly-\u6587\u4EF6","aria-hidden":"true"},"#"),s(" Web Assembly \u6587\u4EF6")],-1),m=s("Vite \u5BF9\u4E8E "),d=s(".wasm"),_=s(" \u6587\u4EF6\u4E5F\u63D0\u4F9B\u4E86\u5F00\u7BB1\u5373\u7528\u7684\u652F\u6301\uFF0C\u6211\u4EEC\u62FF\u4E00\u4E2A\u6590\u6CE2\u62C9\u5951\u7684 "),h=n("code",null,".wasm",-1),f=s(" \u6587\u4EF6(\u539F\u6587\u4EF6\u5DF2\u7ECF\u653E\u5230Github \u4ED3\u5E93\u4E2D)\u6765\u8FDB\u884C\u4E00\u4E0B\u5B9E\u9645\u64CD\u4F5C\uFF0C\u5BF9\u5E94\u7684 JavaScript \u539F\u6587\u4EF6\u5982\u4E0B:"),w=r(`<div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">fib</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> t <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
      a <span class="token operator">=</span> b<span class="token punctuation">;</span>
      b <span class="token operator">=</span> t<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> b<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> a<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>\u5728\u7EC4\u4EF6\u4E2D\u5BFC\u5165fib.wasm\u6587\u4EF6:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> init <span class="token keyword">from</span> <span class="token string">&#39;./fib.wasm&#39;</span><span class="token punctuation">;</span>


<span class="token keyword">type</span> <span class="token class-name">FibFunc</span> <span class="token operator">=</span> <span class="token punctuation">(</span>num<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

<span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>exports<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> fibFunc <span class="token operator">=</span> exports<span class="token punctuation">.</span>fib <span class="token keyword">as</span> FibFunc<span class="token punctuation">;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Fib result:&#39;</span><span class="token punctuation">,</span> <span class="token function">fibFunc</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Vite \u4F1A\u5BF9.wasm\u6587\u4EF6\u7684\u5185\u5BB9\u8FDB\u884C\u5C01\u88C5\uFF0C\u9ED8\u8BA4\u5BFC\u51FA\u4E3A init \u51FD\u6570\uFF0C\u8FD9\u4E2A\u51FD\u6570\u8FD4\u56DE\u4E00\u4E2A Promise\uFF0C\u56E0\u6B64\u6211\u4EEC\u53EF\u4EE5\u5728\u5176 then \u65B9\u6CD5\u4E2D\u62FF\u5230\u5176\u5BFC\u51FA\u7684\u6210\u5458\u2014\u2014fib\u65B9\u6CD5\u3002</p>`,4);function y(g,v){const a=t("a-mark");return e(),o(u,null,[k,b,n("p",null,[m,c(a,null,{default:l(()=>[d]),_:1}),_,h,f]),w],64)}var F=p(i,[["render",y],["__file","5.WebAssembly\u6587\u4EF6.html.vue"]]);export{F as default};
